<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>跨境硬件供应链 Prompt 工具箱</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        /* * Chart Container Styling (Strict Adherence) 
         * Ensures charts are responsive, constrained, and centered.
         */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px; /* Constraints width on large screens */
            margin-left: auto;
            margin-right: auto;
            height: 300px; /* Base height */
            max-height: 400px; /* Hard limit */
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* Custom Scrollbar for text areas */
        textarea::-webkit-scrollbar {
            width: 8px;
        }
        textarea::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        textarea::-webkit-scrollbar-thumb {
            background: #d4a373; 
            border-radius: 4px;
        }
        textarea::-webkit-scrollbar-thumb:hover {
            background: #b08968; 
        }

        /* Warm Neutral Palette Implementation */
        body {
            background-color: #fcfbf9; /* Warm off-white */
            color: #4a4a4a;
            font-family: 'Segoe UI', 'Roboto', Helvetica, Arial, sans-serif;
        }
        .bg-neutral-warm { background-color: #f5f5f0; }
        .bg-accent { background-color: #d4a373; } /* Warm Earthy Orange */
        .bg-accent-hover:hover { background-color: #c59665; }
        .text-accent { color: #d4a373; }
        .border-accent { border-color: #d4a373; }
        
        .card-shadow {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
        }
        
        .nav-item.active {
            background-color: #eaddcf;
            color: #5d4037;
            font-weight: 600;
            border-left: 4px solid #d4a373;
        }
    </style>
    <!-- Chosen Palette: Warm Neutrals (Base: #fcfbf9, Accent: #d4a373, Text: #4a4a4a) -->
    <!-- Application Structure Plan: 
         Designed as a "Prompt Engineer's Dashboard" specifically for Supply Chain PMs.
         1. Layout: Split-screen approach. Left sidebar for navigation through the project lifecycle (Categorized: Strategy, Execution, Management, Logistics). Right side for the interactive workspace.
         2. Workflow: User selects a stage -> App provides context -> User configures language -> App generates the Prompt -> App visually simulates the expected output (Charts) to reinforce understanding.
         3. Rationale: The source text is a list of tools. A linear read is boring. A dashboard allows random access based on current project needs (e.g., "I need a quote comparison now"). The added visualizations (Charts) bridge the gap between "text prompt" and "mental model of the result".
    -->
    <!-- Visualization & Content Choices:
         1. Source: 9 Text Templates. 
         2. Viz 1 (Supplier Tiering): Donut Chart. Goal: Illustrate the "Tiering" concept from Template 1.
         3. Viz 2 (Quote Benchmark): Bar Chart. Goal: Visualize the "Apples-to-Apples" comparison from Template 3.
         4. Viz 3 (Project Status): Mixed Chart. Goal: Show "Plan vs Actual" from Template 7.
         5. Viz 4 (Logistics Cost): Stacked Bar. Goal: Demonstrate the "Cost Model" sensitivity from Template 9.
         6. Interaction: Clicking nav items updates the central view. Toggling CN/EN updates text areas. 
         7. Justification: Charts are mockups of *potential outputs* to help the user understand *why* they are using the prompt.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="h-screen flex flex-col md:flex-row overflow-hidden">

    <!-- Sidebar Navigation -->
    <aside class="w-full md:w-64 bg-white border-r border-gray-200 flex flex-col h-full overflow-y-auto z-10 shrink-0">
        <div class="p-6 border-b border-gray-100">
            <h1 class="text-xl font-bold text-gray-800 tracking-tight">📦 交付专家 <span class="text-accent">Toolkit</span></h1>
            <p class="text-xs text-gray-500 mt-2">跨境硬件供应链项目管理 Prompt 库</p>
        </div>
        
        <nav class="flex-1 py-4 space-y-1">
            <div class="px-4 py-2 text-xs font-semibold text-gray-400 uppercase tracking-wider">0. 全局设置</div>
            <button onclick="loadTemplate(0)" id="nav-0" class="nav-item w-full text-left px-6 py-3 text-sm text-gray-600 hover:bg-neutral-50 transition-colors">
                通用前置指令 (Meta-Prompt)
            </button>

            <div class="px-4 py-2 mt-4 text-xs font-semibold text-gray-400 uppercase tracking-wider">A. 战略与供应链</div>
            <button onclick="loadTemplate(10)" id="nav-10" class="nav-item w-full text-left px-6 py-3 text-sm text-gray-600 hover:bg-neutral-50 transition-colors">
                A. 战略执行全栈交付
            </button>

            <div class="px-4 py-2 mt-4 text-xs font-semibold text-gray-400 uppercase tracking-wider">1. 寻源与策略</div>
            <button onclick="loadTemplate(1)" id="nav-1" class="nav-item w-full text-left px-6 py-3 text-sm text-gray-600 hover:bg-neutral-50 transition-colors">
                1. 供应商地图与分层
            </button>
            <button onclick="loadTemplate(2)" id="nav-2" class="nav-item w-full text-left px-6 py-3 text-sm text-gray-600 hover:bg-neutral-50 transition-colors">
                2. RFQ 资料包生成
            </button>
            <button onclick="loadTemplate(3)" id="nav-3" class="nav-item w-full text-left px-6 py-3 text-sm text-gray-600 hover:bg-neutral-50 transition-colors">
                3. 报价对比矩阵 (Benchmark)
            </button>

            <div class="px-4 py-2 mt-4 text-xs font-semibold text-gray-400 uppercase tracking-wider">2. 质量与执行</div>
            <button onclick="loadTemplate(4)" id="nav-4" class="nav-item w-full text-left px-6 py-3 text-sm text-gray-600 hover:bg-neutral-50 transition-colors">
                4. 样品验证与闭环
            </button>
            <button onclick="loadTemplate(5)" id="nav-5" class="nav-item w-full text-left px-6 py-3 text-sm text-gray-600 hover:bg-neutral-50 transition-colors">
                5. 访厂报告与改善(CAPA)
            </button>

            <div class="px-4 py-2 mt-4 text-xs font-semibold text-gray-400 uppercase tracking-wider">3. 交付与物流</div>
            <button onclick="loadTemplate(6)" id="nav-6" class="nav-item w-full text-left px-6 py-3 text-sm text-gray-600 hover:bg-neutral-50 transition-colors">
                6. 里程碑与 Gate 评审
            </button>
            <button onclick="loadTemplate(7)" id="nav-7" class="nav-item w-full text-left px-6 py-3 text-sm text-gray-600 hover:bg-neutral-50 transition-colors">
                7. 项目状态报告 (PSR)
            </button>
            <button onclick="loadTemplate(8)" id="nav-8" class="nav-item w-full text-left px-6 py-3 text-sm text-gray-600 hover:bg-neutral-50 transition-colors">
                8. 认证路线图
            </button>
            <button onclick="loadTemplate(9)" id="nav-9" class="nav-item w-full text-left px-6 py-3 text-sm text-gray-600 hover:bg-neutral-50 transition-colors">
                9. 物流方案与成本
            </button>

            <div class="px-4 py-2 mt-4 text-xs font-semibold text-gray-400 uppercase tracking-wider">4. 报告节奏</div>
            <button onclick="loadTemplate(11)" id="nav-11" class="nav-item w-full text-left px-6 py-3 text-sm text-gray-600 hover:bg-neutral-50 transition-colors">
                10. 报告节奏配置
            </button>
        </nav>
    </aside>

    <!-- Main Content Area -->
    <main class="flex-1 flex flex-col h-full bg-neutral-warm overflow-hidden relative">
        <!-- Header -->
        <header class="bg-white border-b border-gray-200 px-8 py-4 flex justify-between items-center shadow-sm shrink-0">
            <div>
                <h2 id="template-title" class="text-2xl font-bold text-gray-800">请选择左侧模板</h2>
                <p id="template-desc" class="text-sm text-gray-500 mt-1">点击左侧菜单加载对应的 Prompt 模板与说明。</p>
            </div>
            <div class="flex items-center space-x-4">
                <span class="text-sm text-gray-500">语言模式:</span>
                <div class="bg-gray-100 p-1 rounded-lg flex">
                    <button onclick="setLanguage('CN')" id="btn-cn" class="px-3 py-1 rounded-md text-sm font-medium bg-white shadow text-gray-800 transition-all">中文</button>
                    <button onclick="setLanguage('EN')" id="btn-en" class="px-3 py-1 rounded-md text-sm font-medium text-gray-500 hover:text-gray-800 transition-all">English</button>
                    <button onclick="setLanguage('JP')" id="btn-jp" class="px-3 py-1 rounded-md text-sm font-medium text-gray-500 hover:text-gray-800 transition-all">日本語</button>
                </div>
            </div>
        </header>

        <!-- Scrollable Content -->
        <div class="flex-1 overflow-y-auto p-4 md:p-8">
            <div id="welcome-screen" class="max-w-4xl mx-auto text-center mt-10">
                <div class="text-6xl mb-6">🚀</div>
                <h3 class="text-3xl font-bold text-gray-800 mb-4">欢迎使用交付 Prompt 工具箱</h3>
                <p class="text-lg text-gray-600 mb-8 max-w-2xl mx-auto">
                    本工具专为跨境硬件项目经理设计。通过标准化的 Prompt 模板，帮助您快速生成高质量的交付件，满足日本客户严苛的“可审计、可追溯”要求。
                </p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-left">
                    <div class="bg-white p-6 rounded-xl card-shadow border-t-4 border-accent">
                        <h4 class="font-bold text-lg mb-2">🎯 角色设定</h4>
                        <p class="text-gray-600 text-sm">预置专家角色，确保输出口径专业、统一。</p>
                    </div>
                    <div class="bg-white p-6 rounded-xl card-shadow border-t-4 border-accent">
                        <h4 class="font-bold text-lg mb-2">📊 结构化输出</h4>
                        <p class="text-gray-600 text-sm">强制要求表格化输出，关键结论必带依据。</p>
                    </div>
                    <div class="bg-white p-6 rounded-xl card-shadow border-t-4 border-accent">
                        <h4 class="font-bold text-lg mb-2">🌏 双语支持</h4>
                        <p class="text-gray-600 text-sm">一键切换中英文指令，适应不同工作场景。</p>
                    </div>
                </div>
                <button onclick="loadTemplate(0)" class="mt-12 bg-accent text-white px-8 py-3 rounded-lg font-semibold shadow-lg hover:bg-opacity-90 transition transform hover:-translate-y-1">
                    开始使用 (加载通用指令)
                </button>
            </div>

            <div id="template-content" class="hidden grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-7xl mx-auto">
                
                <!-- Left Column: Input Context & Prompt -->
                <div class="space-y-6">
                    <!-- Section 1: Key Inputs -->
                    <div class="bg-white rounded-xl p-6 card-shadow">
                        <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
                            <span class="bg-gray-100 text-gray-600 w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm">1</span>
                            输入要素 (Input Checklist)
                        </h3>
                        <p class="text-sm text-gray-500 mb-4">在使用此 Prompt 前，请准备好以下信息填入【 】中：</p>
                        <ul id="input-list" class="space-y-2 text-sm text-gray-700">
                            <!-- JS populated -->
                        </ul>
                    </div>

                    <!-- Section 2: Prompt Box -->
                    <div class="bg-white rounded-xl p-6 card-shadow border border-gray-100">
                        <div class="flex flex-wrap justify-between items-center mb-4 gap-3">
                            <div class="flex items-center">
                                <span class="bg-accent text-white w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm">2</span>
                                <div>
                                    <h3 id="content-section-title" class="text-lg font-bold text-gray-800">AI 指令 (Prompt Template)</h3>
                                    <p id="content-section-desc" class="text-xs text-gray-500 mt-1 hidden"></p>
                                </div>
                            </div>
                            <div class="flex flex-wrap items-center gap-2">
                                <div class="bg-gray-100 p-1 rounded-lg flex">
                                    <button onclick="setContentMode('prompt')" id="btn-mode-prompt" class="px-3 py-1 rounded-md text-xs font-medium bg-white shadow text-gray-800 transition-all">Prompt 模式</button>
                                    <button onclick="setContentMode('report')" id="btn-mode-report" class="px-3 py-1 rounded-md text-xs font-medium text-gray-500 hover:text-gray-800 transition-all">报告输出</button>
                                </div>
                                <button onclick="copyContent()" class="text-xs bg-gray-800 text-white px-3 py-1.5 rounded hover:bg-gray-700 transition">
                                    📋 复制当前内容
                                </button>
                                <button onclick="exportContent()" class="text-xs bg-white text-gray-700 border border-gray-300 px-3 py-1.5 rounded hover:bg-gray-100 transition">
                                    ⬇️ 导出当前内容
                                </button>
                            </div>
                        </div>
                        <div class="relative">
                            <textarea id="prompt-area" class="w-full h-96 p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm font-mono leading-relaxed focus:ring-2 focus:ring-accent focus:border-transparent outline-none resize-none" readonly></textarea>
                            <div class="absolute bottom-4 right-4 text-xs text-gray-400 bg-white px-2 py-1 rounded opacity-80">
                                只读模式
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column: Visualization & Structure -->
                <div class="space-y-6">
                    <!-- Section 3: Expected Output Visualization -->
                    <div class="bg-white rounded-xl p-6 card-shadow">
                        <h3 class="text-lg font-bold text-gray-800 mb-2">预期输出模拟 (Output Simulation)</h3>
                        <p class="text-xs text-gray-500 mb-4">
                            Prompt 执行后，AI 应生成类似以下的结构化分析或图表数据。
                            <br><span class="text-accent">*下图为概念演示，非真实数据*</span>
                        </p>
                        
                        <!-- Chart Container -->
                        <div class="chart-container bg-gray-50 rounded-lg border border-gray-100 flex items-center justify-center p-2">
                            <canvas id="vizCanvas"></canvas>
                        </div>
                        
                        <div id="viz-legend" class="mt-4 text-sm text-gray-600">
                            <!-- Dynamic Explanation of the Chart -->
                        </div>
                    </div>

                    <!-- Section 4: Output Structure Rules -->
                    <div class="bg-white rounded-xl p-6 card-shadow">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">输出规范 (Output Rules)</h3>
                        <div class="overflow-x-auto">
                            <table class="min-w-full text-sm text-left text-gray-600">
                                <thead class="bg-gray-50 text-xs uppercase text-gray-500">
                                    <tr>
                                        <th class="px-4 py-2 w-1/3">关键模块</th>
                                        <th class="px-4 py-2">口径与要求</th>
                                    </tr>
                                </thead>
                                <tbody id="output-rules-body" class="divide-y divide-gray-100">
                                    <!-- JS populated -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // --- Data Definitions ---
        const templates = [
            {
                id: 0,
                title: "通用前置指令 (Meta-Prompt)",
                desc: "建议作为每次会话的第一条指令，用于设定 AI 的角色、风格和约束条件。",
                inputs: [
                    "产品定义 (A/B)",
                    "目标市场与认证",
                    "成本与交期目标",
                    "已有线索 (如有)",
                    "时间窗口"
                ],
                outputs: [
                    { module: "角色设定", rule: "跨境硬件供应链 PM" },
                    { module: "约束条件", rule: "不编造、必有依据、表格优先" },
                    { module: "术语统一", rule: "FOB/MOQ/NRE 等标准化" }
                ],
                prompts: {
                    CN: `角色：担任跨境硬件供应链项目经理/采购负责人。目标：为日本客户输出可签收的交付件。\n要求：1）只基于我提供的事实与数据，不得编造；2）所有结论必须给出“依据/假设/待确认项”；3）输出优先用表格；4）术语口径统一（EXW/FOB、MOQ、NRE、Lead time、AQL等）；5）对外表达客观、可审计、可追溯；6）避免频繁使用第二人称。\n项目信息如下：\n* 产品A：【】；产品B：【】\n* 目标市场：【】；目标认证：【】\n* 目标成本/价格带：【】；目标交期：【】\n* 已有供应商线索/名单（如有）：【】\n* 时间窗口/里程碑限制：【】\n  输出语言：【中文/英文/日文/多语言】`,
                    EN: `Role: Act as a cross-border hardware supply chain PM and sourcing lead. Goal: Produce acceptance-ready deliverables for a Japan client.\nConstraints: (1) Use only the facts/data provided—no fabrication; (2) every conclusion must include evidence/assumptions/open items; (3) prefer tables; (4) standardize terms (EXW/FOB, MOQ, NRE, lead time, AQL, etc.); (5) audit-friendly and traceable language.\nProject context:\n* Product A: []; Product B: []\n* Market/Cert: []\n* Cost/Leadtime Targets: []\n* Known leads: []\n* Timeline: []\nOutput language: [Chinese/English/Japanese/Multi-language]`,
                    JP: `役割：越境ハードウェアのサプライチェーンPM/購買責任者として、日本顧客が受領できる納品物を作成する。\n要件：1) 提供された事実とデータのみを使用し、憶測で補完しない；2) すべての結論に「根拠/仮定/要確認事項」を付記する；3) 出力は表形式を優先する；4) 用語を統一する（EXW/FOB、MOQ、NRE、Lead time、AQLなど）；5) 表現は客観的で監査可能かつトレーサブルにする；6) 二人称の多用は避ける。\nプロジェクト情報：\n* 製品A: []／製品B: []\n* 対象市場: []／必須認証: []\n* 目標コスト/価格帯: []／目標リードタイム: []\n* 既存サプライヤー候補（あれば）: []\n* 時間ウィンドウ/マイルストーン制約: []\n  出力言語: [日本語/中国語/英語/多言語]`
                },
                chartType: 'pie',
                chartData: {
                    labels: ['Fact Based', 'Table Format', 'Standard Terms', 'Audit Friendly'],
                    datasets: [{
                        data: [40, 30, 15, 15],
                        backgroundColor: ['#d4a373', '#e9edc9', '#ccd5ae', '#faedcd']
                    }]
                },
                chartDesc: "AI 输出内容的权重分布示意：事实依据最重要，其次是表格化呈现。"
            },
            {
                id: 1,
                title: "1. 供应商地图与分层清单",
                desc: "输出包含区域分布、能力标签、分层（Tiering）逻辑的完整供应商全景图。",
                inputs: [
                    "产品定义 (成品/方案)",
                    "关键能力要求 (研发/认证)",
                    "成本区间",
                    "已知供应商线索"
                ],
                outputs: [
                    { module: "供应商地图", rule: "按区域/能力分类" },
                    { module: "分层规则", rule: "A/B/C 级量化标准" },
                    { module: "评分模型", rule: "包含权重与证据" },
                    { module: "待确认项", rule: "Top 10 缺失信息" }
                ],
                prompts: {
                    CN: `基于以下信息，为【产品A/产品B】输出《供应商地图与分层清单》。\n输入：\n* 产品定义与交付范围（成品/OEM/ODM/方案）：【】\n* 关键能力要求（研发/模具/试产/量产/认证经验/软件等）：【】\n* 目标成本区间/价格带：【】\n* 交期与产能要求：【】\n* 已知供应商（名称、城市、联系人、线索来源）：【】\n  输出要求：\n  1）先给“供应商地图”（按区域/能力域/价值链位置分类）；\n  2）再给“A/B/C分层规则”（可量化评分维度与权重）；\n  3）输出表格：\n* 表1《供应商清单》字段：供应商｜产品覆盖(A/B)｜类型(OEM/ODM/方案)｜核心能力标签｜证据（案例/资质/图片/链接）｜报价可得性｜产能/交期｜沟通响应｜主要风险｜下一步验证动作｜分层(A/B/C)\n* 表2《评分模型》字段：维度｜权重｜评分标准｜当前评分｜证据/备注\n  4）最后给“入围建议”与“待确认问题清单（Top10）”。`,
                    EN: `Create a “Supplier Map & Tiering List” for Product A/B based on the inputs. Provide: supplier map, A/B/C tiering rules with a weighted scoring model, tables (supplier list + scoring model), shortlist recommendation, and top open questions.`,
                    JP: `以下の情報を基に、製品A／製品Bの「サプライヤーマップと階層リスト」を作成してください。\n入力：\n* 製品定義と納入範囲（完成品/OEM/ODM/ソリューション）：[]\n* 必要能力（R&D、金型、試作、量産、認証経験、ソフトウェア等）：[]\n* 目標コスト帯/価格レンジ：[]\n* リードタイム・生産能力要件：[]\n* 既知サプライヤー（社名・都市・担当者・情報源）：[]\n  出力要件：\n  1) まず地域/能力領域/バリューチェーン位置で分類した「サプライヤーマップ」を提示する。\n  2) 次に数量化された指標と重みを含む「A/B/C階層ルール」を提示する。\n  3) 表形式で出力する：\n    ・表1《サプライヤー一覧》項目：サプライヤー｜対応製品(A/B)｜タイプ(OEM/ODM/Solution)｜主要能力タグ｜エビデンス（事例/資格/画像/リンク）｜見積入手性｜生産能力/リードタイム｜コミュニケーション応答｜主要リスク｜次の検証アクション｜階層(A/B/C)\n    ・表2《スコアリングモデル》項目：指標｜重み｜評価基準｜現状スコア｜エビデンス/備考\n  4) 最後に「推奨サプライヤー」および「要確認事項Top10」を記載する。`
                },
                chartType: 'doughnut',
                chartData: {
                    labels: ['Tier A (Preferred)', 'Tier B (Backup)', 'Tier C (Longlist)', 'Disqualified'],
                    datasets: [{
                        data: [15, 25, 40, 20],
                        backgroundColor: ['#ccd5ae', '#e9edc9', '#fefae0', '#d4a373']
                    }]
                },
                chartDesc: "分层结果示意：Prompt 将帮助你把海量供应商线索收敛为金字塔结构（A/B/C）。"
            },
            {
                id: 2,
                title: "2. RFQ 资料包生成",
                desc: "生成标准询价包，包含技术规格、商业条款及 Q&A 追踪，确保发给供应商的信息一致。",
                inputs: [
                    "规格版本",
                    "交付范围 (含包材/测试?)",
                    "订单量预测",
                    "报价口径 (EXW/FOB)"
                ],
                outputs: [
                    { module: "技术规格表", rule: "含图片占位符" },
                    { module: "商业条款", rule: "MOQ/NRE/付款/质保" },
                    { module: "Q&A 记录", rule: "追踪变更历史" }
                ],
                prompts: {
                    CN: `为【产品A/产品B】生成《RFQ资料包 + Q&A/版本记录》。\n输入：\n* 当前规格版本（参数/外观/材料/功能）：【】\n* 交付范围：是否含包材/测试/老化/备件/保修：【】\n* 目标认证与合规要求：【】\n* 预计订单量/预测（首单、年度、MOQ假设）：【】\n* 报价口径：EXW/FOB/CIF/DDP 及币种/税口径：【】\n  输出结构：\n  A）RFQ封面页：项目背景、询价范围、截止时间、报价口径、联系人\n  B）《技术规格表》：关键参数表（表格）+ 必要图片说明（用“应插入图片位置”占位）\n  C）《商业条款表》：MOQ/阶梯价/交期/NRE/付款/有效期/质保/违约\n  D）《资料清单》：供应商需回传的材料清单（资质、体系、案例、产线照片等）\n  E）《Q&A与版本记录》两张表：\n* Q&A字段：问题ID｜提出方｜问题描述｜影响范围｜答复｜结论｜待办｜截止时间\n* 版本记录字段：版本号｜变更点｜变更原因｜影响（成本/交期/认证）｜确认人｜日期\n  规则：所有缺失信息以“待确认”标注，不得补写。`,
                    EN: `Generate an RFQ pack plus Q&A and version log for Product A/B, including cover, spec table (with image placeholders), commercial terms table, required supplier documents, Q&A tracker, and version log. Flag unknowns as “TBD”.`,
                    JP: `製品A／製品B向けの「RFQ資料パック＋Q&A/版数管理」を作成してください。\n入力：\n* 現行仕様バージョン（パラメータ/外観/材料/機能）：[]\n* 納入範囲：梱包材/試験/エージング/予備品/保証を含むか：[]\n* 目標認証・コンプライアンス要件：[]\n* 予定注文量・予測（初回ロット、年間、MOQ想定）：[]\n* 見積前提：EXW/FOB/CIF/DDP、通貨、税条件：[]\n  出力構成：\n  A) RFQカバーページ：プロジェクト背景、見積範囲、締切、見積前提、連絡先\n  B) 《技術仕様表》：主要パラメータ表（表形式）＋必要な画像説明（「画像挿入予定」プレースホルダー使用）\n  C) 《商務条件表》：MOQ/段階価格/リードタイム/NRE/支払条件/有効期限/保証/違約金\n  D) 《提出資料リスト》：サプライヤーから回収する書類（資格、品質体系、実績、ライン写真等）\n  E) 《Q&Aおよび版数記録》2表：\n    ・Q&A項目：質問ID｜起票者｜質問内容｜影響範囲｜回答｜結論｜アクション｜期限\n    ・版数管理項目：版数｜変更点｜変更理由｜影響（コスト/リードタイム/認証）｜承認者｜日付\n  ルール：不明点は「要確認」または「TBD」と明示し、推測で埋めない。`
                },
                chartType: 'bar',
                chartData: {
                    labels: ['Technical Specs', 'Commercial Terms', 'Q&A', 'Legal/Compliance'],
                    datasets: [{
                        label: 'RFQ Completeness %',
                        data: [100, 100, 80, 60],
                        backgroundColor: '#d4a373'
                    }]
                },
                chartDesc: "RFQ 构成示意：确保技术、商务、法律和互动记录（Q&A）四个维度无遗漏。"
            },
            {
                id: 3,
                title: "3. 报价对比矩阵 (Benchmark)",
                desc: "将不同供应商的报价“拉齐”到同一口径（Apples-to-Apples），识别成本差异与风险。",
                inputs: [
                    "原始报价数据",
                    "统一口径设定 (Incoterms)"
                ],
                outputs: [
                    { module: "同口径规则", rule: "定义如何换算" },
                    { module: "对比矩阵", rule: "阶梯价/NRE/交期对比" },
                    { module: "条款差异", rule: "识别隐性成本" }
                ],
                prompts: {
                    CN: `基于供应商报价与条款，输出《报价与产品对比矩阵（同口径）》并给出入围建议。\n输入：\n* 报价数据（可粘贴原文/表格）：【】\n* 统一口径：币种、Incoterms、含税/不含税、包装/测试是否包含：【】\n  输出要求：\n  1）先定义“同口径规则”（把不同报价转换为可比口径的步骤与假设）；\n  2）输出主表《报价对比矩阵》字段：供应商｜单价(按数量梯度)｜MOQ｜NRE/模具｜交期｜付款｜质保｜包含项/不包含项｜认证支持｜风险点｜备注；\n  3）输出副表《条款差异清单》：差异点｜供应商A｜供应商B｜影响｜建议立场；\n  4）结论：入围/备选/淘汰（必须给依据）+ 下一轮询证问题清单。`,
                    EN: `Build an apples-to-apples quotation benchmark: define normalization rules, create the main comparison matrix, a deltas table for commercial/technical scope differences, and a tiering recommendation with evidence.`,
                    JP: `サプライヤーの見積と条件に基づき、「同一前提の見積比較マトリクス」と入選推奨を作成してください。\n入力：\n* 見積データ（原文／表形式で貼り付け可）：[]\n* 正規化前提：通貨、インコタームズ、税込/税抜、梱包・試験を含むか：[]\n  出力要件：\n  1) まず「同一前提ルール」を定義し、異なる見積を比較可能にする換算ステップと仮定を示す。\n  2) 主表《見積比較マトリクス》項目：サプライヤー｜単価（数量レンジ別）｜MOQ｜NRE/金型費｜リードタイム｜支払条件｜保証｜含有範囲/除外項目｜認証対応｜リスク｜備考。\n  3) 副表《条件差分リスト》：差分項目｜サプライヤーA｜サプライヤーB｜影響｜推奨スタンス。\n  4) 結論：入選／バックアップ／除外（根拠必須）＋次ラウンドで確認すべき質問一覧。`
                },
                chartType: 'bar',
                chartData: {
                    labels: ['Supplier A', 'Supplier B', 'Target Price'],
                    datasets: [
                        { label: 'Unit Price', data: [12.5, 11.8, 11.5], backgroundColor: '#d4a373' },
                        { label: 'NRE Amortized', data: [1.2, 2.5, 0], backgroundColor: '#e9edc9' },
                        { label: 'Logistics Adder', data: [0.5, 0.8, 0], backgroundColor: '#faedcd' }
                    ]
                },
                chartDesc: "总拥有成本 (TCO) 堆叠图示意：Prompt 帮助你拆解单纯的“单价”与隐性成本（NRE/物流）。"
            },
            {
                id: 4,
                title: "4. 样品验证报告 & 问题闭环",
                desc: "标准化的测试结果记录与 Issue Log，确保每个问题都有根因分析和截止时间。",
                inputs: [
                    "样品版本",
                    "测试项目 (功能/外观)",
                    "实测结果/照片"
                ],
                outputs: [
                    { module: "执行概览", rule: "Pass/Fail 结论" },
                    { module: "Issue Log", rule: "严重度/根因/对策" },
                    { module: "下轮计划", rule: "改模/重测时间线" }
                ],
                prompts: {
                    CN: `生成第【N】轮《样品验证报告 + 问题闭环清单》。\n输入：\n* 本轮样品目标与版本：【】\n* 测试项目与判定标准（功能/外观/耐久/安全等）：【】\n* 实测结果与照片说明（可文字描述）：【】\n  输出结构：\n  A）执行概览：样品信息、测试环境、结论（Pass/Conditional Pass/Fail）\n  B）测试结果表：项目｜标准｜结果｜是否通过｜证据｜备注\n  C）问题清单（Issue Log）：问题ID｜严重度(S1-S4)｜现象｜复现条件｜根因（若未知标TBD）｜临时对策｜永久对策｜责任方｜截止时间｜复测结果｜关闭条件\n  D）风险评估：对成本/交期/认证的影响\n  E）下一轮验证计划：需要的改动、样品清单、时间线\n  规则：不确定根因不得推断，只能列“假设/需验证”。`,
                    EN: `Produce Sample Validation Report (Round N) + Issue Closure Log with pass/fail status, test result table, issue log with severity, impact assessment, and next-round plan. No guessing—use TBD.`,
                    JP: `第[N]ラウンドの「サンプル検証レポート＋課題クローズログ」を作成してください。\n入力：\n* 今回のサンプル目的とバージョン：[]\n* 試験項目と判定基準（機能/外観/耐久/安全など）：[]\n* 実測結果および写真説明（テキストで可）：[]\n  出力構成：\n  A) 実施概要：サンプル情報、試験環境、結論（Pass/条件付きPass/Fail）\n  B) 試験結果表：項目｜基準｜結果｜合否｜証拠｜備考\n  C) 課題リスト（Issue Log）：課題ID｜重大度(S1-S4)｜現象｜再現条件｜根因（不明の場合はTBD）｜暫定対策｜恒久対策｜責任者｜期限｜再試験結果｜クローズ条件\n  D) リスク評価：コスト/リードタイム/認証への影響\n  E) 次ラウンド検証計画：必要な変更、サンプル一覧、タイムライン\n  ルール：根因が不確定な場合は推測せず、「仮説/要検証」と記載する。`
                },
                chartType: 'doughnut',
                chartData: {
                    labels: ['Pass', 'Minor Issue (S3/S4)', 'Major Issue (S1/S2)', 'Pending'],
                    datasets: [{
                        data: [65, 20, 10, 5],
                        backgroundColor: ['#ccd5ae', '#faedcd', '#d4a373', '#e5e5e5']
                    }]
                },
                chartDesc: "测试结果分布示意：清晰展示 S1-S4 问题占比，辅助 Go/No-Go 决策。"
            },
            {
                id: 5,
                title: "5. 访厂报告与改善 (CAPA)",
                desc: "将访厂见闻转化为客观的审核报告与纠正措施追踪表 (CAPA)。",
                inputs: [
                    "工厂基本信息",
                    "现场观察记录",
                    "发现的问题证据"
                ],
                outputs: [
                    { module: "现场核查表", rule: "符合/不符合判定" },
                    { module: "CAPA 表", rule: "根因/措施/责任人" },
                    { module: "合同建议", rule: "基于风险的条款约束" }
                ],
                prompts: {
                    CN: `根据以下访厂记录，输出《访厂报告 + 改善项追踪表（CAPA）》\n输入：\n* 工厂信息：名称/地址/联系人/主营/产能：【】\n* 访厂日期与参会人员：【】\n* 现场观察记录（产线/工艺/设备/仓储/追溯/人员）：【】\n* 发现的问题与证据（照片描述）：【】\n  输出结构：\n  A）执行摘要：结论（推荐/条件推荐/不推荐）+ 关键依据\n  B）现场核查清单（表格）：模块｜检查点｜观察事实｜符合/不符合｜风险等级｜证据｜建议\n  C）CAPA追踪表：编号｜问题｜根因(TBD可)｜纠正措施｜预防措施｜责任人｜截止时间｜验证方式｜状态\n  D）对合作的建议条款：需要写入合同/PO的关键约束（如AQL、追溯、交期、赔付）\n  规则：事实与判断分开写；判断必须对应事实证据。`,
                    EN: `Create a Factory Visit Report + CAPA tracker: executive summary, audit checklist table, CAPA log, and recommended contractual controls. Separate facts vs judgments.`,
                    JP: `以下の工場訪問記録に基づき、「工場訪問レポート＋CAPA追跡表」を作成してください。\n入力：\n* 工場情報：名称/所在地/担当者/主要製品/能力：[]\n* 訪問日と参加者：[]\n* 現場観察（生産ライン/工程/設備/倉庫/トレーサビリティ/人員）：[]\n* 発見された課題とエビデンス（写真の説明可）：[]\n  出力構成：\n  A) エグゼクティブサマリー：結論（推奨/条件付き推奨/非推奨）＋主要根拠\n  B) 現場チェックリスト（表形式）：モジュール｜チェックポイント｜観察事実｜適合/不適合｜リスクレベル｜証拠｜提言\n  C) CAPA追跡表：番号｜課題｜根因(不明ならTBD)｜是正措置｜予防措置｜責任者｜期限｜検証方法｜ステータス\n  D) 協業に向けた契約条項提案：契約/POに盛り込むべき主要制約（例：AQL、トレーサビリティ、納期、補償）\n  ルール：事実と判断を分離し、判断には必ず対応する事実証拠を添える。`
                },
                chartType: 'radar',
                chartData: {
                    labels: ['Quality System', 'Production Cap', 'R&D', 'Warehouse', 'EHS'],
                    datasets: [{
                        label: 'Audit Score',
                        data: [4, 3, 5, 2, 4],
                        backgroundColor: 'rgba(212, 163, 115, 0.4)',
                        borderColor: '#d4a373',
                        pointBackgroundColor: '#d4a373'
                    }]
                },
                chartDesc: "工厂能力雷达图示意：基于观察事实生成的五维评分，直观展示工厂短板。"
            },
            {
                id: 6,
                title: "6. 里程碑计划 & Gate 评审",
                desc: "建立项目主计划与关口（Gate）评审标准，确保项目按节奏推进。",
                inputs: [
                    "上市日期 (Deadline)",
                    "当前状态",
                    "关键依赖 (模具/认证)"
                ],
                outputs: [
                    { module: "里程碑表", rule: "计划 vs 实际日期" },
                    { module: "Gate 模板", rule: "准入/退出条件" },
                    { module: "关键路径", rule: "风险与缓冲识别" }
                ],
                prompts: {
                    CN: `为【产品A/产品B】建立《项目里程碑计划 + Gate评审记录模板》。\n输入：\n* 目标上市/交付日期：【】\n* 当前阶段与已完成事项：【】\n* 关键依赖（认证/模具/关键物料/软件）：【】\n  输出要求：\n  A）里程碑计划表：阶段｜里程碑｜计划日期｜实际日期｜负责人｜输入｜输出｜风险/阻塞项｜下一步\n  B）Gate评审模板（每个Gate一页）：\n* Gate名称｜准入条件｜交付件清单｜退出条件｜评审结论(Go/Conditional/No-Go)｜待办清单｜风险与缓释｜签核人｜日期\n  C）关键路径与缓冲建议（用文字说明即可）\n  规则：计划要可执行，日期不确定则用“周数/窗口”。`,
                    EN: `Build a milestone plan and gate review templates with stage, deliverables, entry/exit criteria, decision outcomes, action items, and critical path/buffer notes.`,
                    JP: `製品A／製品B向けの「プロジェクトマイルストーン計画＋ゲート審査テンプレート」を作成してください。\n入力：\n* 目標発売/納入日：[]\n* 現在のステージと完了事項：[]\n* 主要依存事項（認証/金型/重要部材/ソフトウェア）：[]\n  出力要件：\n  A) マイルストーン計画表：フェーズ｜マイルストーン｜計画日｜実績日｜責任者｜インプット｜アウトプット｜リスク/阻害要因｜次アクション\n  B) ゲート審査テンプレート（ゲート毎に1ページ）：ゲート名｜エントリー条件｜必要成果物一覧｜出口条件｜審査結論(Go/Conditional/No-Go)｜アクションリスト｜リスクと緩和策｜承認者｜日付\n  C) クリティカルパスとバッファの提案（文章で可）\n  ルール：計画は実行可能であること。不確定な日付は「週数/期間」で表記する。`
                },
                chartType: 'bar',
                chartData: {
                    labels: ['Kickoff', 'EVT', 'DVT', 'PVT', 'MP'],
                    datasets: [
                        { label: 'Planned Duration (Wks)', data: [2, 4, 6, 2, 2], backgroundColor: '#e9edc9' },
                        { label: 'Buffer/Delay', data: [0, 1, 2, 0, 0], backgroundColor: '#d4a373' }
                    ]
                },
                chartDesc: "项目甘特图/进度条示意：直观展示各阶段耗时及风险缓冲。"
            },
            {
                id: 7,
                title: "7. 月中/月底项目报告 (Status Report)",
                desc: "向客户（尤其是日本客户）汇报进度的标准格式，强调风险与决策点。",
                inputs: [
                    "本期完成事项",
                    "供应商/成本变更",
                    "风险清单"
                ],
                outputs: [
                    { module: "进度看板", rule: "计划 vs 实际" },
                    { module: "Top 5 风险", rule: "等级/对策/负责人" },
                    { module: "下一步决策", rule: "需客户确认事项" }
                ],
                prompts: {
                    CN: `生成【月中/月底】《项目状态报告》，用于对日本客户汇报。\n输入：\n* 本期完成事项与证据链接：【】\n* 供应商状态变更（入围/淘汰/待定）：【】\n* 报价/成本更新：【】\n* 风险与问题清单：【】\n  输出结构：\n  A）执行摘要（3-5条）\n  B）进度：计划vs实际（表格）\n  C）供应商状态看板（表格）\n  D）成本/报价摘要（同口径口径说明 + 关键变化原因）\n  E）Top 5 风险：风险｜影响｜概率｜等级｜对策｜负责人｜截止时间\n  F）下期计划（行动项）：事项｜输出｜负责人｜截止时间｜验收口径\n  规则：必须提供“下一步决策点”（需要客户确认/拍板的事项）。`,
                    EN: `Create a mid-month or month-end status report with exec summary, plan vs actual, supplier dashboard, pricing update with normalization notes, top risks, next actions with owners/deadlines, and decision points.`,
                    JP: `日本顧客向けの【月中／月末】「プロジェクトステータスレポート」を作成してください。\n入力：\n* 今期の完了事項と証憑リンク：[]\n* サプライヤーのステータス変化（入選/除外/保留）：[]\n* 見積/コスト更新：[]\n* リスクと課題リスト：[]\n  出力構成：\n  A) エグゼクティブサマリー（3〜5項目）\n  B) 進捗：計画 vs 実績（表形式）\n  C) サプライヤーステータスボード（表形式）\n  D) コスト/見積サマリー（正規化前提の説明＋主な変動要因）\n  E) Top5リスク：リスク｜影響度｜発生確率｜評価ランク｜対策｜担当者｜期限\n  F) 次期計画（アクションアイテム）：タスク｜成果物｜担当者｜期限｜受入基準\n  ルール：必ず「次の意思決定ポイント」（顧客承認が必要な事項）を明記する。`
                },
                chartType: 'bar',
                chartData: {
                    labels: ['Tasks Completed', 'Tasks Delayed', 'Risks Open'],
                    datasets: [{
                        label: 'Count',
                        data: [12, 3, 5],
                        backgroundColor: ['#ccd5ae', '#d4a373', '#e63946']
                    }]
                },
                chartDesc: "项目健康度仪表盘：红黄绿状态，一目了然地展示项目受控程度。"
            },
            {
                id: 8,
                title: "8. 认证路线图 (Certification)",
                desc: "梳理产品进入目标市场（如日本 PSE/TELEC）所需的认证清单、周期与样品。",
                inputs: [
                    "产品信息",
                    "目标市场",
                    "现有资料"
                ],
                outputs: [
                    { module: "路线图", rule: "周期/费用/样品数" },
                    { module: "推进台账", rule: "依赖项管理" },
                    { module: "资料缺口", rule: "缺失项与获取方式" }
                ],
                prompts: {
                    CN: `针对【目标市场：日本/其他】与【产品类型】输出《认证路线图与推进台账》。\n输入：\n* 产品信息与用途：【】\n* 目标认证/法规清单（若未知写TBD）：【】\n* 现有资料（说明书/电路图/材料/测试报告等）：【】\n  输出结构：\n  A）路线图：认证项｜适用原因｜负责方｜所需资料｜样品数量｜周期｜费用构成｜关键风险\n  B）推进台账：任务｜负责人｜截止时间｜状态｜依赖项｜备注\n  C）资料清单缺口：缺失资料｜影响｜获取方式｜预计时间\n  规则：不确定法规条款不得硬写，用“需第三方确认”。`,
                    EN: `Produce a certification roadmap and tracker with required documents, samples, timelines, costs, risks, and an action tracker. Unknowns must be flagged for third-party confirmation.`,
                    JP: `【対象市場：日本/その他】および【製品タイプ】に対する「認証ロードマップと推進台帳」を作成してください。\n入力：\n* 製品情報と用途：[]\n* 目標認証/法規リスト（不明な場合はTBD）：[]\n* 既存資料（マニュアル/回路図/材料情報/試験報告等）：[]\n  出力構成：\n  A) ロードマップ：認証項目｜適用理由｜担当部署｜必要資料｜サンプル数｜期間｜費用内訳｜主要リスク\n  B) 推進台帳：タスク｜担当者｜期限｜ステータス｜依存関係｜備考\n  C) 資料ギャップリスト：不足資料｜影響｜入手方法｜想定時期\n  ルール：確定していない法規要件を断定しない。「第三者確認が必要」と明記する。`
                },
                chartType: 'line',
                chartData: {
                    labels: ['Prep', 'Testing', 'Rectification', 'Certificate Issue'],
                    datasets: [{
                        label: 'Timeline (Weeks)',
                        data: [2, 4, 2, 2],
                        borderColor: '#d4a373',
                        fill: true,
                        backgroundColor: 'rgba(212, 163, 115, 0.2)'
                    }]
                },
                chartDesc: "认证周期甘特图示意：展示从资料准备到拿证的关键节点与耗时。"
            },
            {
                id: 9,
                title: "9. 物流方案与费用测算",
                desc: "对比空运、海运等不同渠道的成本与时效，建立敏感性测算模型。",
                inputs: [
                    "货物信息 (重/泡)",
                    "交期要求",
                    "贸易条款",
                    "备选渠道"
                ],
                outputs: [
                    { module: "方案对比", rule: "时效 vs 计费规则" },
                    { module: "测算模型", rule: "不同重量段的费用" },
                    { module: "推荐方案", rule: "主备选建议" }
                ],
                prompts: {
                    CN: `为【起运地】→【目的地】输出《物流方案对比与费用测算》。\n输入：\n* 货物信息：品名/HS（如有）/重量/体积/箱规/件数：【】\n* 交期要求（最晚到货日/时效窗口）：【】\n* 贸易条款假设：EXW/FOB/DDP等：【】\n* 备选渠道：快递/空运/海运/专线（如已知）：【】\n  输出结构：\n  A）方案对比表：渠道｜时效｜计费规则（计费重/体积重）｜预估费用｜清关难度｜限制条款｜风险｜适用场景\n  B）费用测算模型（表格）：费用项｜公式/口径｜数值｜备注（支持不同重量/体积区间敏感性）\n  C）结论：推荐方案（1主1备）+ 推荐依据 + 需要客户确认的假设\n  规则：所有费用均标注“口径与来源”，无来源则标“估算”。`,
                    EN: `Compare logistics options from origin to destination and build a cost model with billing rules, lead times, clearance risk, restrictions, sensitivity by weight/volume, and a recommended primary + backup option with assumptions.`,
                    JP: `【出発地】→【到着地】の「物流オプション比較と費用試算」を作成してください。\n入力：\n* 貨物情報：品名/HSコード（任意）/重量/体積/カートン仕様/数量：[]\n* リードタイム要件（到着期限/所要時間ウィンドウ）：[]\n* 貿易条件の前提：EXW/FOB/DDP等：[]\n* 想定チャネル：クーリエ/航空便/海上便/専門回線など（既知の場合）：[]\n  出力構成：\n  A) 案件比較表：チャネル｜所要日数｜課金ルール（実重量/容積重量）｜概算費用｜通関難易度｜制約条件｜リスク｜適用シナリオ\n  B) 費用試算モデル（表形式）：費用項目｜計算式/前提｜数値｜備考（重量/体積別の感度分析に対応）\n  C) 結論：推奨案（メイン＋バックアップ）と根拠、顧客確認が必要な仮定\n  ルール：全ての費用に「根拠と情報源」を明記し、根拠が無い場合は「推定値」と記載する。`
                },
                chartType: 'bar',
                chartData: {
                    labels: ['Express (3 days)', 'Air Freight (7 days)', 'Sea Fast (15 days)', 'Sea Normal (30 days)'],
                    datasets: [
                        { label: 'Cost ($)', data: [5000, 2500, 1000, 600], backgroundColor: '#d4a373' }
                    ]
                },
                chartDesc: "物流成本 vs 时效权衡图：直观展示“金钱换时间”的阶梯关系，辅助选定方案。"
            },
            {
                id: 10,
                title: "A. 战略执行全栈交付包",
                desc: "整合A1-A5、B1-B3、C、D模块，输出从供应商分层到执行汇报的全链路交付件。",
                inputs: [
                    "产品A/产品B定义与差异化卖点",
                    "目标市场、合规/认证窗口期",
                    "成本/MOQ/交期目标与量级假设",
                    "现有供应商名单与推进状态",
                    "内部资源与约束（测试/认证/物流）"
                ],
                outputs: [
                    { module: "A1 成品供应商分层", rule: "OEM/ODM能力画像+分层与验证动作" },
                    { module: "A2 RFQ 标准化", rule: "统一口径的RFQ资料包+Q&A+台账" },
                    { module: "A3 报价对标", rule: "同口径报价矩阵+入围结论" },
                    { module: "A4 导入准备", rule: "样品验证计划与量产Go/No-Go" },
                    { module: "A5 工厂支持清单", rule: "工程/质量/合规/项目/商务支持能力评估" },
                    { module: "交付件总览表", rule: "所有交付物的责任人、截止时间与状态" }
                ],
                prompts: {
                    CN: `角色：担任跨境硬件供应链项目负责人，目标是为产品A与产品B建立可执行的成品供应导入路径。\n输入：\n* 产品A定位与关键规格：【】\n* 产品B定位与关键规格：【】\n* 目标市场/认证与时间窗口：【】\n* 成本/MOQ/交期目标与量级假设：【】\n* 现有供应商线索与推进状态：【】\n* 内部资源约束（测试/认证/物流/预算）：【】\n  输出结构：\n  A1. 成品供应商盘点与分层：\n    - 供应商池（产品A/产品B）区分主供与备选；\n    - 能力画像：研发（结构/电子/软件）、模具/试产、质量体系、认证记录、交付案例、产能弹性、沟通响应；\n    - 分层规则A/B/C（含评分项、权重、判定标准）与关键差异对比；\n    - 输出表：供应商清单 + 供应商画像卡（1页/家，含风险点与下一步验证项）。\n  A2. 供应商咨询与RFQ标准化：\n    - 统一对外口径（功能边界、规格版本、交付范围、报价口径）；\n    - RFQ资料包（技术规格/包装要求/预计量级或MOQ区间/目标合规要求）；\n    - Q&A清单与版本变更记录；\n    - 报价回收台账（到期提醒、缺失项追补）。\n  A3. 成品报价与商业条件对标：\n    - 同口径报价矩阵：整机单价、阶梯价、MOQ、交期、付款、一次性费用、报价有效期；\n    - 报价范围定义（包装、测试/老化、质检标准、备品备件、保修、改版费用）；\n    - 供给稳定性评估（产能承诺、关键物料策略、异常响应与返修路径）；\n    - 入围/淘汰/待验证结论及理由，可选BOM/成本拆解。\n  A4. 样品验证与导入评估：\n    - 样品轮次计划、测试项目、判定标准、问题闭环机制；\n    - 每轮样品验证报告（问题、原因、对策、复测结果）；\n    - 量产导入评估（关键工序、质量控制点、检验规范、良率目标、试产安排、Go/No-Go与前置条件）。\n  A5. 工厂支持能力与合作条件：\n    - 工程开发支持、质量交付支持、合规认证支持、项目管理沟通、商务条件；\n    - “工厂支持能力核对表”打分/结论/缺口与补齐方案；\n    - 谈判要点与优先级建议。\n  B. 执行推进：\n    - 项目规划表/里程碑计划（关键路径、依赖项、决策点）；\n    - 日常协同机制（微信群/行动清单/升级机制）；\n    - 访厂报告与整改追踪；\n    - Gate准入/退出条件与评审结论。\n  C. 整体报告机制：\n    - 月中/月底报告模板：进度（计划vs实际）、供应商状态、报价更新、风险Top5与对策、下期计划与责任。\n  D. 其他专项支持：\n    - 第三方认证协助（路径、对接、资料、整改台账）；\n    - 物流与费用对比（多渠道时效/费用/限制、贸易条款口径、费用测算）；\n    - 出货资料与包装标签规范（包装要求书、标签规则、装箱/清关资料）。\n  额外输出：《交付件总览表》字段：阶段｜交付件名称｜责任人｜截止时间｜当前状态（未启动/进行中/完成/需协助）｜关键依赖｜备注/待确认项。\n  规则：仅基于提供信息，不得编造；所有未知项标注“待确认”或“TBD”；表格为主，文字结论需给依据或假设。`,
                    EN: `Role: Act as the cross-border hardware supply chain lead to deliver an end-to-end onboarding package for Product A and Product B finished goods.\nInputs:\n* Product A positioning & key specs: []\n* Product B positioning & key specs: []\n* Target market/certification & timeline window: []\n* Cost/MOQ/lead time targets with volume assumptions: []\n* Existing supplier leads & status: []\n* Internal constraints (testing/certification/logistics/budget): []\nRequired outputs:\nA1. Finished Goods Supplier Mapping & Tiering:\n  - Build supplier pools per product (primary vs backup);\n  - Capability profiles (R&D mech/EE/software, tooling/pilot, quality system, certification history, delivery cases, capacity flexibility, communication);\n  - Tiering rules A/B/C with scoring items, weights, thresholds, and key deltas;\n  - Tables: supplier list plus 1-page profile cards (capabilities, evidence, risks, next validation actions).\nA2. Inquiry & RFQ Standardization:\n  - Unified external scope (functional boundary, spec version, deliverables, quotation basis);\n  - RFQ package (specs, appearance/packaging, forecast volume or MOQ bands, compliance requirements);\n  - Supplier Q&A log with version/change record;\n  - Quotation tracker with due reminders and missing-item follow-up.\nA3. Finished Goods Quotation Benchmark:\n  - Apples-to-apples matrix covering unit price, tiered pricing, MOQ, lead time, payment, one-time fees, validity;\n  - Scope definition (packaging, testing/burn-in, quality criteria, spares, warranty, redesign fees);\n  - Supply stability review (capacity commitment, key component strategy, escalation/repair loops);\n  - Recommendation (shortlist / backup / drop) with rationale; optional BOM/cost breakdown.\nA4. Sampling Validation & Onboarding Readiness:\n  - Sample round plan, test items, acceptance criteria, closure workflow;\n  - Per-round validation report (issues, root cause, countermeasures, re-test result);\n  - Mass production readiness (critical processes, quality gates, inspection criteria, yield targets, pilot build, Go/No-Go with prerequisites).\nA5. Factory Support & Enablement Checklist:\n  - Engineering, quality/delivery, compliance, project management, and commercial support capabilities;\n  - Factory support checklist with scoring, conclusion, gaps, remediation plan;\n  - Negotiation focus & priority list.\nB. Program Execution:\n  - Project plan & milestones (critical path, dependencies, decision gates);\n  - Daily collaboration mechanism (WeChat group setup, action tracker, escalation);\n  - Factory visit report & remediation tracker;\n  - Gate entry/exit criteria and review outcome.\nC. Reporting Cadence:\n  - Mid-month & month-end report templates (plan vs actual, supplier status, quote update, top 5 risks with mitigations, next-period plan & owners).\nD. Additional Support:\n  - Third-party certification assistance (path, contacts, dossier, remediation tracker);\n  - Logistics & cost comparison (channels, lead time, cost, restrictions, Incoterms alignment, cost model);\n  - Shipping documents & labeling standards (packaging spec, labeling rules, packing/clearance checklist).\nExtra deliverable: "Deliverables Overview Table" with columns: Phase | Deliverable | Owner | Due Date | Status (Not Started/In Progress/Done/Help Needed) | Dependencies | Notes/TBD.\nRules: Use only provided facts, mark unknowns as "TBD"; prioritize tables; every conclusion must state evidence or assumption.`,
                    JP: `役割：越境ハードウェアのサプライチェーン責任者として、製品Aと製品Bの完成品サプライヤー導入ロードマップを構築し、実行可能な納品物を整備する。\n入力：\n* 製品Aのポジショニングと主要仕様：[]\n* 製品Bのポジショニングと主要仕様：[]\n* 対象市場/認証とスケジュールウィンドウ：[]\n* コスト/MOQ/リードタイム目標および数量前提：[]\n* 既存サプライヤーリードと進捗状況：[]\n* 内部リソース制約（試験/認証/物流/予算）：[]\n  出力構成：\n  A1. 完成品サプライヤー棚卸と階層化：\n    - 製品A/製品Bごとのサプライヤープールを構築し、主力と代替を区分する。\n    - 能力プロファイル：R&D（構造/電子/ソフト）、金型・試作、品質体系、認証実績、量産事例、キャパシティ柔軟性、コミュニケーション速度。\n    - A/B/C階層ルール（評価項目、重み、判定基準）と主要差分の整理。\n    - 出力表：サプライヤー一覧＋1社1ページのプロフィールカード（能力、証拠、リスク、次の検証アクション）。\n  A2. サプライヤー打診とRFQ標準化：\n    - 外部向けの統一前提（機能境界、仕様バージョン、納入範囲、見積前提）を策定。\n    - RFQ資料パック（技術仕様、外観・包装要件、想定数量/MOQレンジ、目標コンプライアンス要件）。\n    - Q&Aリストと版数変更記録を整備。\n    - 見積回収台帳（期限リマインド、不足項目フォロー）。\n  A3. 完成品見積と商務条件ベンチマーク：\n    - 同一前提の見積比較マトリクス：単価、段階価格、MOQ、リードタイム、支払条件、一時費用、見積有効期限。\n    - 見積範囲定義（包装、試験/エージング、品質基準、予備品、保証、改版費用条件）。\n    - 供給安定性評価（キャパ約束、主要部材方針、異常時対応とリワークフロー）。\n    - 入選/除外/要検証の結論と根拠、任意でBOM/コスト分解。\n  A4. サンプル検証と導入評価：\n    - サンプル各ラウンド計画、試験項目、判定基準、課題クローズメカニズム。\n    - 各ラウンドの検証レポート（課題、原因、対策、再試験結果）。\n    - 量産導入評価（重要工程、品質ゲート、検査規格、歩留まり目標、試作手配、Go/No-Go条件）。\n  A5. 工場サポート能力と協業条件：\n    - エンジニアリング支援、品質・納入支援、コンプライアンス支援、プロジェクト管理・コミュニケーション、商務条件。\n    - 「工場サポート能力チェックリスト」：スコア、結論、ギャップ、補完計画。\n    - 交渉論点と優先度の提案。\n  B. 実行推進：\n    - プロジェクト計画/マイルストーン（クリティカルパス、依存関係、意思決定ポイント）。\n    - 日常連携メカニズム（WeChatグループ、アクショントラッカー、エスカレーション）。\n    - 工場訪問レポートと是正追跡。\n    - ゲートのエントリー/エグジット条件と審査結論。\n  C. 全体レポート体制：\n    - 月中/月末レポートテンプレート：進捗（計画vs実績）、サプライヤーステータス、見積更新、リスクTop5と対策、次期計画と責任分担。\n  D. その他専門サポート：\n    - 第三者認証支援（フロー、窓口、資料、是正台帳）。\n    - 物流と費用比較（各チャネルのリードタイム/費用/制約、貿易条件整合、費用試算）。\n    - 出荷書類と包装ラベル要件（包装仕様書、ラベルルール、梱包・通関書類）。\n  追加出力：《納品物全体一覧表》項目：フェーズ｜納品物名｜責任者｜期限｜ステータス（未着手/進行中/完了/支援要）｜主要依存関係｜備考/要確認事項。\n  ルール：提供情報のみに基づき、創作しない。不明事項は「要確認」または「TBD」と明記。表形式を優先し、文章の結論には根拠または前提を付すこと。`
                },
                chartType: 'bar',
                chartData: {
                    labels: ['A1 Tiering', 'A2 RFQ', 'A3 Benchmark', 'A4 Validation', 'A5 Support', 'B Execution', 'C Reporting', 'D Support'],
                    datasets: [
                        {
                            label: 'Workstream Effort Weight',
                            data: [15, 12, 13, 11, 9, 14, 10, 8],
                            backgroundColor: '#d4a373'
                        }
                    ]
                },
                chartDesc: "全栈交付包工作量权重示意：突出供应商分层、RFQ、执行推进等关键模块的精力分布。"
            },
            {
                id: 11,
                title: "C. 报告节奏配置与导出",
                desc: "面向月额1.5万人民币顾问服务的标准报告节奏与导出策略，平衡工作量与客户感知价值。",
                inputs: [
                    "客户名称与联系人",
                    "合作周期与关键里程碑",
                    "顾问费用与服务范围",
                    "项目阶段重点",
                    "可能触发的专项事件（访厂/样品/认证/出货）"
                ],
                outputs: [
                    { module: "固定报告节奏", rule: "月中/月末正式报告各1份，清晰定义目的与篇幅" },
                    { module: "周度看板", rule: "每周一次轻量更新，突出状态灯与行动项" },
                    { module: "专项报告触发", rule: "访厂/样品/认证/物流发生时按次交付" },
                    { module: "价值口径", rule: "解释“工作量-价值”匹配与费用合理性" },
                    { module: "导出方式", rule: "支持一键导出文本，便于提交客户" }
                ],
                prompts: {
                    CN: `背景：以月额1.5万元人民币（顾问型+推进型）的交付模式，需建立兼顾管理价值与工作量可控性的报告节奏。\n输入信息：\n* 客户名称与对接人：【】\n* 合作起止时间与关键里程碑：【】\n* 服务范围（产品/供应商/认证/物流等）：【】\n* 预计专项事件（访厂/样品/认证/出货）：【】\n* 内部协同节奏与工具（微信群/Notion/Sheets等）：【】\n  输出内容：\n  1. 报告总览表（表格）：类型｜频次｜交付形式｜主要内容｜篇幅/载体｜责任人｜导出/共享方式。\n     - 固定报告：月中项目报告、月末项目报告（各1份/月）。\n     - 轻量更新：周度看板/Action Tracker（4次/月，群内或在线表格截图）。\n     - 专项报告：访厂报告+CAPA、样品验证、认证/检品、物流费用等（0-2份/月按触发）。\n  2. “工作量—价值”说明（文字）：解释为何此组合既体现持续管理价值、又避免无效堆文档，可直接引用如下要点：\n     * 常规节奏：每月2份正式报告（中期/月底）+ 每周一次看板更新。\n     * 事件触发：关键节点发生时追加专项报告，按次结算。\n     * 好处：管理层有节奏，执行层有抓手，节点有深度，投入与费用匹配。\n  3. 月中报告模板要点（列清单）：进度对比、供应商状态、报价变化、Top风险、下半月决策点、附件建议。\n  4. 月末报告模板要点：当月闭环、Gate结论、下月计划与资源需求、关键问题/升级项、指标变化。\n  5. 周度看板字段示例：日期、总体状态灯、关键里程碑动向、行动项Owner/截止、风险/问题、需客户确认事项。\n  6. 专项报告触发条件与内容纲要：访厂、样品、认证、物流分别列出“触发条件｜主要内容｜输出载体｜预计篇幅”。\n  7. 导出与共享建议：注明使用网页导出功能/复制文本，结合 Notion/Slides/Docs 形成正式件。`,
                    EN: `Context: For a RMB 15,000/month consulting + execution retainer, define a reporting cadence that balances perceived value and manageable workload.\nInputs:\n* Client name & counterpart: []\n* Engagement timeline & key milestones: []\n* Scope coverage (products/suppliers/certification/logistics): []\n* Expected triggered events (factory visit/sample/certification/shipment): []\n* Collaboration tools & touchpoints (WeChat/Notion/Sheets, etc.): []\nDeliverable requirements:\n1. Reporting cadence matrix (table): Report Type | Frequency | Format | Core Content | Length/Medium | Owner | Export/Sharing Method. Include: two fixed reports per month (mid-month & end-month), four weekly kanban updates (lightweight), zero to two triggered reports (factory visit CAPA, sample validation, certification/shipment briefs, logistics cost analysis).\n2. Workload-to-value narrative: articulate why this mix delivers continuous management value without bloated documentation. Reuse these talking points: two formal reports monthly + weekly kanban; triggered reports for key events; benefits for leadership rhythm, execution visibility, and cost-value alignment.\n3. Mid-month report checklist: plan vs actual, supplier status, quotation delta, top risks & mitigations, decisions for remainder of month, attachment guidance.\n4. Month-end report checklist: closure results, gate outcomes, next-month plan & resource ask, escalations, KPI deltas.\n5. Weekly kanban fields: date, overall RAG, milestone movement, action items with owner/deadline, risks/issues, client decisions needed.\n6. Triggered report conditions & outlines: for factory visits, sample rounds, certifications, shipments/logistics include trigger, key sections, medium, rough length.\n7. Export & sharing guidance: reference the webpage export button / copy flow plus recommended destination tools (Notion/Slides/Docs) for formal delivery.`,
                    JP: `背景：月額1.5万元人民幣（コンサル＋推進型）の契約で、価値訴求と工数バランスを両立する報告リズムを設計する。\n入力：\n* 顧客名と窓口担当：[]\n* 契約期間と主要マイルストーン：[]\n* サービス範囲（製品/サプライヤー/認証/物流など）：[]\n* 想定されるイベント（訪問/サンプル/認証/出荷）：[]\n* コラボレーション手段（WeChat/Notion/Sheets 等）：[]\n出力：\n1. 報告カデンス一覧表：種類｜頻度｜形式｜主要内容｜ボリューム/媒体｜担当｜共有方法。月中レポート（月1）、月末レポート（月1）、週次カンバン更新（月4）、イベントトリガー型レポート（月0〜2）。\n2. 「工数と価値」説明文：上記組み合わせが継続的な管理価値を示しつつ文書過多を避ける理由を整理（毎月2本の正式レポート＋週次カンバン、イベント時のスポットレポート、マネジメントと実務の双方に利点）。\n3. 月中レポートのチェックリスト：計画vs実績、サプライヤー状況、見積変動、主要リスクと対策、後半の意思決定ポイント、添付推奨。\n4. 月末レポートのチェックリスト：月内のクローズ結果、Gate判定、翌月計画と必要リソース、重要課題・エスカレーション、指標変動。\n5. 週次カンバン項目例：日付、全体ステータス（RAG）、マイルストーン動向、アクション項目（担当/期限）、リスク/課題、顧客決裁事項。\n6. イベントトリガー型レポート：訪問、サンプル、認証、物流それぞれに対し「トリガー条件｜主な内容｜媒体｜目安ボリューム」をまとめる。\n7. 共有・エクスポートの推奨：本ページのエクスポート機能/コピー利用と、Notion/Slides/Docs 等での正式化手順を記載。`
                },
                chartType: 'bar',
                chartData: {
                    labels: ['Formal Reports', 'Weekly Kanban', 'Triggered Specials'],
                    datasets: [
                        {
                            label: 'Recommended Count / Month',
                            data: [2, 4, 2],
                            backgroundColor: ['#d4a373', '#e9edc9', '#ccd5ae']
                        }
                    ]
                },
                chartDesc: "推荐节奏示意：每月2份正式报告、4次周度看板、0-2份专项交付，实现价值与工时平衡。"
            }
        ];

        // --- State ---
        let currentTemplateId = 0;
        let currentLang = 'CN';
        let currentMode = 'prompt';
        let currentChart = null;

        // --- Functions ---

        function init() {
            // Initial load only if needed, logic is mostly event-driven.
            // Hidden initially to show welcome screen.
        }

        function loadTemplate(id) {
            currentTemplateId = id;
            const template = templates.find(t => t.id === id);

            // 1. Update UI Selection
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            document.getElementById(`nav-${id}`).classList.add('active');

            // 2. Hide Welcome, Show Content
            document.getElementById('welcome-screen').classList.add('hidden');
            document.getElementById('template-content').classList.remove('hidden');
            document.getElementById('template-content').classList.add('grid');

            // 3. Populate Texts
            document.getElementById('template-title').innerText = template.title;
            document.getElementById('template-desc').innerText = template.desc;

            // 4. Populate Inputs
            const inputList = document.getElementById('input-list');
            inputList.innerHTML = '';
            template.inputs.forEach(input => {
                const li = document.createElement('li');
                li.className = "flex items-start";
                li.innerHTML = `<span class="text-accent mr-2">•</span> ${input}`;
                inputList.appendChild(li);
            });

            // 5. Populate Output Rules
            const rulesBody = document.getElementById('output-rules-body');
            rulesBody.innerHTML = '';
            template.outputs.forEach(output => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="px-4 py-3 font-medium text-gray-800">${output.module}</td>
                    <td class="px-4 py-3 text-gray-500">${output.rule}</td>
                `;
                rulesBody.appendChild(tr);
            });

            // 6. Set Prompt Text
            updatePromptText();

            // 7. Render Visualization
            renderChart(template);
        }

        function updatePromptText() {
            const template = templates.find(t => t.id === currentTemplateId);
            const textArea = document.getElementById('prompt-area');
            const sectionTitle = document.getElementById('content-section-title');
            const sectionDesc = document.getElementById('content-section-desc');

            let content = '';
            let descText = '';

            if (currentMode === 'prompt') {
                sectionTitle.innerText = 'AI 指令 (Prompt Template)';
                content = template.prompts?.[currentLang] || '';
                descText = '';
            } else {
                sectionTitle.innerText = '报告输出 (Report Draft)';
                if (template.reports && template.reports[currentLang]) {
                    content = template.reports[currentLang];
                    descText = '用于直接面向客户的结构化报告初稿，可按需调整语气与篇幅。';
                } else {
                    content = '【提示】当前模板暂未配置报告输出模式，请继续使用 Prompt 模式或补充模板。';
                    descText = '暂无预设报告内容，可基于 Prompt 输出自行整理。';
                }
            }

            textArea.value = content;

            if (descText) {
                sectionDesc.innerText = descText;
                sectionDesc.classList.remove('hidden');
            } else {
                sectionDesc.innerText = '';
                sectionDesc.classList.add('hidden');
            }

            // Toggle Button Styles (Language)
            const buttons = {
                CN: document.getElementById('btn-cn'),
                EN: document.getElementById('btn-en'),
                JP: document.getElementById('btn-jp')
            };

            const activeClass = "px-3 py-1 rounded-md text-sm font-medium bg-white shadow text-gray-800 transition-all";
            const inactiveClass = "px-3 py-1 rounded-md text-sm font-medium text-gray-500 hover:text-gray-800 transition-all";

            Object.keys(buttons).forEach(lang => {
                if (buttons[lang]) {
                    buttons[lang].className = lang === currentLang ? activeClass : inactiveClass;
                }
            });

            // Toggle Button Styles (Content Mode)
            const modeButtons = {
                prompt: document.getElementById('btn-mode-prompt'),
                report: document.getElementById('btn-mode-report')
            };

            const modeActiveClass = 'px-3 py-1 rounded-md text-xs font-medium bg-white shadow text-gray-800 transition-all';
            const modeInactiveClass = 'px-3 py-1 rounded-md text-xs font-medium text-gray-500 hover:text-gray-800 transition-all';

            Object.keys(modeButtons).forEach(mode => {
                if (modeButtons[mode]) {
                    modeButtons[mode].className = mode === currentMode ? modeActiveClass : modeInactiveClass;
                }
            });
        }

        function setLanguage(lang) {
            currentLang = lang;
            updatePromptText();
        }

        function setContentMode(mode) {
            if (!['prompt', 'report'].includes(mode)) {
                return;
            }
            currentMode = mode;
            updatePromptText();
        }

        function copyContent() {
            const textArea = document.getElementById('prompt-area');
            const content = textArea.value;

            if (!content.trim()) {
                return;
            }

            navigator.clipboard.writeText(content).then(() => {
                // Visual feedback
                const btn = document.querySelector('button[onclick="copyContent()"]');
                const originalText = btn.innerHTML;
                btn.innerHTML = "✅ 已复制";
                btn.classList.replace('bg-gray-800', 'bg-green-600');
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.classList.replace('bg-green-600', 'bg-gray-800');
                }, 2000);
            });
        }

        function renderChart(template) {
            const ctx = document.getElementById('vizCanvas').getContext('2d');
            const legendDiv = document.getElementById('viz-legend');
            
            if (currentChart) {
                currentChart.destroy();
            }

            legendDiv.innerHTML = template.chartDesc;

            // Common Options
            const commonOptions = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: { boxWidth: 12, font: { size: 11 } }
                    },
                    tooltip: {
                        enabled: true
                    }
                }
            };

            currentChart = new Chart(ctx, {
                type: template.chartType,
                data: template.chartData,
                options: commonOptions
            });
        }

        function exportContent() {
            const template = templates.find(t => t.id === currentTemplateId);
            const textArea = document.getElementById('prompt-area');
            const content = textArea.value || '';

            if (!content.trim()) {
                return;
            }

            const filePrefix = currentMode === 'report' ? 'report' : 'prompt';
            const fileName = `${filePrefix}_${template ? template.id : 'export'}_${currentLang}.txt`;
            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = fileName;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            setTimeout(() => URL.revokeObjectURL(link.href), 0);
        }

    </script>
</body>
</html>